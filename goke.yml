global:
  environment:
    LOKI: "Loki"
    LOKI_CMD: '$(echo "$LOKI")'
    THOR: "LORD OF LIGHTNING"

build: 
  files: [cmd/cli/*.go, internal/*]
  run:
    - "go build -o ./build/goke ./cmd/cli"

genmocks:
  files: [internal/stdlib_wrapper.go]
  run:
    - "mockery --name=StdlibWrapper --recursive --output=internal/tests --outpkg=tests --filename=stdlib_wrapper_mock.go"

greet-loki:
  run:
    - "echo 'Hello ${LOKI_CMD}'"

greet-cats:
  files: [cmd/cli/*]
  run:
    - 'echo "Hello Frey"'
    - 'echo "Hello Sunny"'
    - "greet-loki"

greet-thor:
  run:
    - "echo 'Hello ${THOR}'"
    - "echo 'Hello ${THOR_CMD}'"
  env:
    THOR: "LORD OF THUNDER"
    THOR_CMD: '$(echo ${THOR})'
